/* ===== ADDITIONAL MOBILE OVERFLOW PREVENTION FIXES =====
 * These fixes complement responsive-fixes.css with specific focus on
 * preventing horizontal overflow on mobile devices and ensuring
 * all content stays within viewport boundaries
 * ========================================================= */

/* ===== CRITICAL MOBILE VIEWPORT FIXES ===== */

/* Prevent any horizontal scrolling at root level */
html, body {
    overflow-x: hidden !important;
    position: relative;
    width: 100% !important;
    max-width: 100vw !important;
}

/* Ensure all direct children of body respect viewport width */
body > * {
    max-width: 100vw !important;
    box-sizing: border-box !important;
}

/* ===== HERO SECTION MOBILE OPTIMIZATIONS ===== */

/* Hero section specific mobile fixes */
.hero-section {
    width: 100% !important;
    max-width: 100vw !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Hero content responsive layout */
@media screen and (max-width: 768px) {
    .hero-content {
        grid-template-columns: 1fr !important;
        gap: clamp(16px, 4vw, 24px);
        padding: 0 !important;
        margin: 0 !important;
        max-width: 100% !important;
    }
    
    .hero-text, .hero-image {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* Hero title mobile optimization */
    .hero-title {
        font-size: clamp(1.8rem, 8vw, 2.2rem) !important;
        line-height: 1.2 !important;
        word-break: break-word !important;
        overflow-wrap: break-word !important;
    }
    
    /* Hero buttons mobile layout */
    .hero-buttons {
        flex-direction: column !important;
        align-items: center !important;
        gap: 12px !important;
        width: 100% !important;
        max-width: 100% !important;
    }
    
    .hero-buttons .btn {
        width: 100% !important;
        max-width: 280px !important;
        min-width: 0 !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        padding: 12px 16px !important;
        font-size: 14px !important;
    }
}

/* ===== WIDGET SECTION MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .widget-responsive-section {
        width: 100% !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
        margin: 0 !important;
        border-radius: 0 !important;
        padding: clamp(15px, 4vw, 24px) 0 !important;
    }
    
    .widget-cards-row {
        grid-template-columns: 1fr !important;
        gap: clamp(12px, 3vw, 16px) !important;
        padding: 0 clamp(15px, 4vw, 20px) !important;
        margin: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .widget-card {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        overflow-x: hidden !important;
        flex-shrink: 1 !important;
    }
    
    .widget-card-content {
        min-width: 0 !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .widget-card-title,
    .widget-time-main,
    .widget-quote-main,
    .widget-crypto-price {
        word-break: break-word !important;
        overflow-wrap: break-word !important;
    }
}

/* ===== NAVIGATION MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .navbar {
        width: 100% !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
        left: 0 !important;
        right: 0 !important;
    }
    
    .nav-container {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        padding: 0 clamp(15px, 4vw, 20px) !important;
        margin: 0 !important;
    }
    
    .nav-menu {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .nav-menu.active {
        width: 100% !important;
        max-width: 100% !important;
        left: 0 !important;
        right: 0 !important;
    }
}

/* ===== CARD LAYOUTS MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    /* All card-based layouts */
    .highlights-grid,
    .research-grid,
    .conferences-timeline,
    .papers-list,
    .ai-tools-grid,
    .pubs__grid {
        grid-template-columns: 1fr !important;
        gap: clamp(12px, 3vw, 16px) !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* Individual cards */
    .highlight-card,
    .research-card,
    .conference-card,
    .paper-card,
    .ai-tool-card,
    .pub-card,
    .blog-card,
    .card {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        overflow-x: hidden !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
    }
}

/* ===== PAGE HERO SECTIONS MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .about-minimal-hero,
    .publications-minimal-hero,
    .conferences-minimal-hero,
    .research-minimal-hero,
    .blog-minimal-hero,
    .contact-minimal-hero {
        width: calc(100vw) !important;
        max-width: calc(100vw) !important;
        margin: 0 calc(-1 * clamp(15px, 4vw, 20px)) !important;
        padding: clamp(24px, 6vw, 32px) clamp(15px, 4vw, 20px) !important;
        border-radius: 0 !important;
        overflow-x: hidden !important;
        box-sizing: border-box !important;
    }
    
    .about-main-title,
    .publications-main-title,
    .conferences-main-title,
    .research-main-title,
    .blog-main-title,
    .contact-main-title {
        font-size: clamp(1.8rem, 8vw, 2.2rem) !important;
        word-break: break-word !important;
        overflow-wrap: break-word !important;
        text-align: center !important;
    }
}

/* ===== ABOUT PAGE SPECIFIC MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .about-content-enhanced {
        grid-template-columns: 1fr !important;
        gap: clamp(16px, 4vw, 20px) !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .about-profile-enhanced {
        position: static !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .quick-stats {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: clamp(8px, 2vw, 12px) !important;
    }
    
    .positions-grid,
    .research-areas-grid,
    .courses-grid-enhanced,
    .skills-categories {
        grid-template-columns: 1fr !important;
        gap: clamp(12px, 3vw, 16px) !important;
    }
}

/* ===== FORM ELEMENTS MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .form-control,
    input,
    textarea,
    select,
    button {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        box-sizing: border-box !important;
        font-size: 16px !important; /* Prevents zoom on iOS */
    }
    
    .form-group {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    /* Publications search interface mobile */
    .publications-search-interface .search-filters-row {
        flex-direction: column !important;
        gap: clamp(8px, 2vw, 12px) !important;
        align-items: stretch !important;
    }
    
    .publications-search-interface .modern-select,
    .publications-search-interface .modern-search-input {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
    }
}

/* ===== TEXT AND CONTENT MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    /* Ensure all text content wraps properly */
    h1, h2, h3, h4, h5, h6,
    p, span, div, a,
    .hero-description,
    .research-card p,
    .paper-abstract,
    .conference-topic,
    .bio-section p {
        word-break: break-word !important;
        overflow-wrap: break-word !important;
        hyphens: auto !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    /* Long URLs and links */
    .research-profile-link,
    .conference-link,
    .blog-btn {
        word-break: break-all !important;
        overflow-wrap: break-word !important;
        white-space: normal !important;
        text-align: center !important;
    }
}

/* ===== MODAL AND OVERLAY MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .email-modal .email-content,
    .footnote-modal .footnote-content {
        width: calc(100vw - 32px) !important;
        max-width: calc(100vw - 32px) !important;
        margin: 16px !important;
        max-height: calc(100vh - 32px) !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
    }
    
    .email-display {
        flex-direction: column !important;
        gap: 12px !important;
        text-align: center !important;
    }
    
    #emailText {
        word-break: break-all !important;
        overflow-wrap: break-word !important;
        font-size: 14px !important;
    }
}

/* ===== CONFERENCE CARDS MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .conference-card {
        flex-direction: column !important;
        text-align: center !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .conference-date {
        margin-right: 0 !important;
        margin-bottom: 16px !important;
        align-self: center !important;
    }
    
    .conference-content {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
    
    .conference-content h3 {
        word-break: break-word !important;
        overflow-wrap: break-word !important;
        hyphens: auto !important;
    }
}

/* ===== FLOATING ELEMENTS MOBILE FIXES ===== */

@media screen and (max-width: 768px) {
    .floating-shape {
        display: none !important; /* Hide floating shapes on mobile to prevent overflow */
    }
    
    .ai-background-canvas {
        width: 100vw !important;
        max-width: 100vw !important;
        overflow: hidden !important;
    }
    
    .hero-background {
        width: 100% !important;
        max-width: 100vw !important;
        overflow: hidden !important;
    }
}

/* ===== SMALL MOBILE SPECIFIC FIXES ===== */

@media screen and (max-width: 480px) {
    /* Container adjustments for very small screens */
    .container {
        padding-left: 15px !important;
        padding-right: 15px !important;
    }
    
    /* Widget cards small mobile */
    .widget-cards-row {
        padding: 0 15px !important;
        gap: 10px !important;
    }
    
    /* Hero sections small mobile */
    .about-minimal-hero,
    .publications-minimal-hero,
    .conferences-minimal-hero,
    .research-minimal-hero,
    .blog-minimal-hero,
    .contact-minimal-hero {
        margin: 0 -15px !important;
        padding: 25px 15px !important;
    }
    
    /* Text size adjustments for small screens */
    .hero-title,
    .about-main-title,
    .publications-main-title {
        font-size: clamp(1.5rem, 10vw, 1.8rem) !important;
    }
    
    /* Button adjustments for small screens */
    .hero-buttons .btn {
        max-width: 240px !important;
        font-size: 13px !important;
        padding: 10px 14px !important;
    }
}

/* ===== EXTRA SMALL MOBILE FIXES ===== */

@media screen and (max-width: 360px) {
    .container {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }
    
    .widget-cards-row {
        padding: 0 12px !important;
        gap: 8px !important;
    }
    
    .hero-title {
        font-size: clamp(1.3rem, 11vw, 1.6rem) !important;
    }
    
    .hero-buttons .btn {
        max-width: 200px !important;
        font-size: 12px !important;
        padding: 8px 12px !important;
    }
}

/* ===== LANDSCAPE ORIENTATION FIXES ===== */

@media screen and (orientation: landscape) and (max-height: 500px) {
    .hero-section {
        min-height: 80vh !important;
    }
    
    .container {
        padding-left: 5vw !important;
        padding-right: 5vw !important;
    }
    
    /* Reduce hero content spacing in landscape */
    .hero-content {
        gap: 16px !important;
    }
    
    .widget-cards-row {
        gap: 12px !important;
    }
}

/* ===== TOUCH DEVICE OPTIMIZATIONS ===== */

@media (hover: none) and (pointer: coarse) {
    /* Ensure touch targets are large enough */
    .btn, button, a, input, textarea, select {
        min-height: 44px !important;
        min-width: 44px !important;
        touch-action: manipulation;
    }
    
    /* Improve tap highlighting */
    .btn, button, a {
        -webkit-tap-highlight-color: rgba(33, 128, 141, 0.3);
    }
    
    /* Prevent text selection on UI elements */
    .navbar, .hero-buttons, .widget-card, .footer {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
}

/* ===== DEBUG HELPERS (Remove in production) ===== */

/* Uncomment to debug overflow issues on mobile
@media screen and (max-width: 768px) {
    * {
        outline: 1px solid red !important;
    }
    
    body {
        border: 2px solid blue !important;
    }
    
    .container {
        border: 2px solid green !important;
    }
}
*/

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    .floating-shape,
    .typing-text,
    .hero-background,
    .ai-background-canvas {
        animation: none !important;
        transition: none !important;
    }
}

/* Force hardware acceleration for smooth scrolling */
@media screen and (max-width: 768px) {
    .hero-section,
    .widget-responsive-section,
    .main-content {
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        will-change: scroll-position;
    }
}