<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Research | Frédéric Mirindi</title>
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root, html.dark {
    --bg-primary: #0a0a0f;
    --bg-secondary: #12121a;
    --text-primary: #d1d5db;
    --text-white: #ffffff;
    --text-muted: #9ca3af;
    --accent-color: #00e5e5;
    --glass-bg: rgba(255, 255, 255, 0.03);
    --glass-border: rgba(255, 255, 255, 0.08);
    --linkedin-blue: #0077b5;
    --usb-red: #c41230;
    --navbar-bg: rgba(10, 10, 15, 0.85);
    --theme-btn-bg: rgba(255,255,255,0.07);
    --theme-btn-border: rgba(255,255,255,0.15);
  }
  html.light {
    --bg-primary: #f5f6fa;
    --bg-secondary: #ffffff;
    --text-primary: #374151;
    --text-white: #111827;
    --text-muted: #6b7280;
    --accent-color: #0891b2;
    --glass-bg: rgba(0, 0, 0, 0.03);
    --glass-border: rgba(0, 0, 0, 0.10);
    --linkedin-blue: #0077b5;
    --usb-red: #c41230;
    --navbar-bg: rgba(245, 246, 250, 0.92);
    --theme-btn-bg: rgba(0,0,0,0.06);
    --theme-btn-border: rgba(0,0,0,0.12);
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif; background-color: var(--bg-primary); color: var(--text-primary); line-height: 1.7; min-height: 100vh; overflow-x: hidden; transition: background-color 0.3s ease, color 0.3s ease; }
  a { color: var(--accent-color); text-decoration: none; }
  a:hover { text-decoration: underline; }
  .navbar { background: var(--navbar-bg); border-bottom: 1px solid var(--glass-border); padding: 0.75rem 2rem; position: fixed; top: 0; left: 0; right: 0; z-index: 100; backdrop-filter: blur(12px); transition: background 0.3s ease; }
  .navbar-container { max-width: 80rem; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
  .navbar-brand { display: flex; align-items: center; gap: 0.75rem; }
  .navbar-brand h1 { font-size: 1.35rem; font-weight: 700; color: var(--text-white); }
  .navbar-menu { display: flex; align-items: center; gap: 1.5rem; }
  .nav-links { display: flex; gap: 0.25rem; }
  .nav-link { display: flex; align-items: center; gap: 0.4rem; padding: 0.4rem 0.9rem; border-radius: 0.4rem; color: var(--text-muted); font-weight: 500; font-size: 0.9rem; transition: all 0.3s ease; text-decoration: none; }
  .nav-link:hover, .nav-link.active { background: var(--glass-bg); color: var(--text-white); text-decoration: none; }
  .nav-link.active { border-bottom: 2px solid var(--accent-color); }
  .social-icons-nav { display: flex; align-items: center; gap: 0.75rem; }
  .social-icon { font-size: 1.1rem; color: var(--text-muted); transition: transform 0.3s ease, color 0.3s ease; }
  .social-icon:hover { transform: translateY(-2px); color: var(--accent-color); }
  .icon-linkedin { color: var(--linkedin-blue) !important; }
  /* Appearance Toggle */
  .appearance-toggle { display: flex; align-items: center; gap: 0.3rem; background: var(--theme-btn-bg); border: 1.5px solid var(--theme-btn-border); border-radius: 2rem; padding: 0.28rem 0.5rem; cursor: pointer; transition: all 0.3s ease; }
  .appearance-toggle:hover { border-color: var(--accent-color); }
  .theme-option { display: flex; align-items: center; gap: 0.3rem; padding: 0.22rem 0.65rem; border-radius: 1.5rem; font-size: 0.78rem; font-weight: 600; color: var(--text-muted); transition: all 0.25s ease; user-select: none; letter-spacing: 0.02em; border: none; background: none; cursor: pointer; }
  .theme-option svg { width: 14px; height: 14px; flex-shrink: 0; }
  .theme-option.active { background: var(--accent-color); color: #0a0a0f; box-shadow: 0 2px 8px rgba(0,229,229,0.25); }
  html.light .theme-option.active { color: #fff; }
          /* Hero Banner */
        .research-hero { position: relative; width: 100%; height: 420px; margin-top: 56px; overflow: hidden; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #0a0a1a 0%, #0d1b2a 40%, #0a2233 70%, #081820 100%); }
        html.light .research-hero { background: linear-gradient(135deg, #e8f4f8 0%, #d0eaf5 40%, #b8dff0 70%, #c5e8f0 100%); }
        #hero-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .hero-content { position: relative; z-index: 2; text-align: center; pointer-events: none; }
        .research-hero-title { color: #ffffff; font-size: 3rem; font-weight: 700; letter-spacing: 0.05em; text-shadow: 0 2px 12px rgba(0,0,0,0.85), 0 0 40px rgba(0,0,0,0.5); animation: fadeInUp 1s ease-out; }
        html.light .research-hero-title { color: #0a2233; text-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .research-hero-title .accent-bar { display: block; width: 60px; height: 3px; background: var(--accent-color); margin: 0.65rem auto 0 auto; border-radius: 2px; box-shadow: 0 0 10px rgba(0,229,229,0.6); animation: expandBar 1.2s ease-out 0.3s both; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes expandBar { from { width: 0; opacity: 0; } to { width: 60px; opacity: 1; } }
  .page-section { padding: 3rem 4rem 4rem 4rem; max-width: 60rem; margin: 0 auto; }
  .card { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 0.75rem; padding: 2rem; margin-bottom: 1.75rem; backdrop-filter: blur(5px); transition: border-color 0.3s ease; }
  .card:hover { border-color: rgba(0, 229, 229, 0.22); }
  .card h2 { font-size: 1.25rem; font-weight: 700; color: var(--text-white); margin-bottom: 0.85rem; display: flex; align-items: center; gap: 0.6rem; }
  .card h2::before { content: ''; display: inline-block; width: 3px; height: 1.1em; background: var(--accent-color); border-radius: 2px; flex-shrink: 0; }
  .card p { color: var(--text-primary); margin-bottom: 0.75rem; }
  .card p:last-child { margin-bottom: 0; }
  .inst-uofm { color: var(--accent-color); } .inst-uofm:hover { color: var(--accent-color); opacity: 0.8; }
  .inst-usb { color: var(--accent-color); } .inst-usb:hover { color: var(--accent-color); opacity: 0.8; }
  footer { padding: 1.5rem; text-align: center; border-top: 1px solid var(--glass-border); }
  footer p { font-size: 0.8rem; color: var(--text-muted); }
  .menu-toggle { display: none; background: none; border: none; color: var(--text-white); font-size: 1.4rem; cursor: pointer; padding: 0.5rem; z-index: 101; }
  .mobile-linkedin-nav { display: none; align-items: center; } .mobile-linkedin-nav a { color: var(--linkedin-blue); font-size: 1.4rem; }
  @media (max-width: 768px) {
    .menu-toggle { display: none !important; } .mobile-linkedin-nav { display: flex; align-items: center; }
    .navbar { padding: 0.6rem 1rem; }
    .navbar-menu { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-secondary); flex-direction: column; align-items: center; justify-content: center; gap: 2rem; z-index: 100; }
    .navbar-menu.active { display: flex; }
    .nav-links { flex-direction: column; align-items: center; gap: 1rem; }
    .nav-link { font-size: 1.2rem; padding: 0.7rem 1.5rem; }
    .social-icons-nav { gap: 1.5rem; } .social-icon { font-size: 1.4rem; }
    .research-hero { height: 240px; } .research-hero-title { font-size: 2.2rem; }
    .page-section { padding: 2rem 1.5rem 3rem 1.5rem; } .card { padding: 1.25rem; }
    .appearance-toggle { padding: 0.22rem 0.4rem; } .theme-option { padding: 0.18rem 0.5rem; font-size: 0.72rem; }
  }
  @media (max-width: 480px) {
    .research-hero { height: 180px; } .research-hero-title { font-size: 1.75rem; }
    .page-section { padding: 1.5rem 1rem 2rem 1rem; } .card { padding: 1rem; } .card h2 { font-size: 1.1rem; }
    .navbar-brand h1 { font-size: 1.1rem; } footer { padding: 1rem; } footer p { font-size: 0.7rem; }
  }
  .mobile-bottom-nav { display:none; position:fixed; bottom:0; left:0; right:0; z-index:1000; background:rgba(10,10,15,0.97); border-top:1px solid var(--glass-border); backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px); padding:0.35rem 0; padding-bottom:env(safe-area-inset-bottom,0); }
  html.light .mobile-bottom-nav { background: rgba(245,246,250,0.97); }
  .mobile-bottom-nav-container { display:flex; justify-content:space-around; align-items:center; max-width:100%; }
  .mobile-bottom-nav-item { display:flex; flex-direction:column; align-items:center; justify-content:center; text-decoration:none; color:var(--text-muted); font-size:0.62rem; padding:0.25rem 0.5rem; border-radius:0.5rem; transition:color 0.2s ease; gap:0.12rem; flex:1; position:relative; }
  .mobile-bottom-nav-item i { font-size:1.1rem; transition:transform 0.2s ease; }
  .mobile-bottom-nav-item span { font-weight:500; letter-spacing:0.02em; }
  .mobile-bottom-nav-item:hover, .mobile-bottom-nav-item.active { color:var(--accent-color); text-decoration:none; }
  .mobile-bottom-nav-item.active i { transform:scale(1.1); }
  .mobile-bottom-nav-item.active::before { content:''; position:absolute; top:-0.35rem; left:50%; transform:translateX(-50%); width:1.8rem; height:2px; background:var(--accent-color); border-radius:2px; box-shadow:0 0 6px rgba(0,229,229,0.4); }
  @media (max-width:768px) { .mobile-bottom-nav { display:block; } body { padding-bottom:3.5rem; } footer { margin-bottom:3.5rem; } }
  #geo-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
            /* Research Results Accordion */
        .results-accordion { margin-top: 1.75rem; border: 1px solid var(--glass-border); border-radius: 0.6rem; overflow: hidden; }
        .results-toggle { cursor: pointer; padding: 1rem 1.25rem; font-size: 0.95rem; font-weight: 600; color: var(--accent-color); background: var(--glass-bg); display: flex; align-items: center; gap: 0.6rem; transition: background 0.3s ease; width: 100%; font-family: inherit; outline: none; }
        .results-toggle::-webkit-details-marker { display: none; }
        .results-toggle::marker { display: none; content: ''; }
        .results-toggle:hover { background: rgba(0,229,229,0.08); }
        .toggle-icon { font-size: 0.7rem; transition: transform 0.3s ease; display: inline-block; }
        .results-toggle.open .toggle-icon { transform: rotate(90deg); }
        .results-content { padding: 1.25rem; border-top: 1px solid var(--glass-border); }
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem; }
        .results-grid-full { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        .result-item { position: relative; border-radius: 0.6rem; overflow: hidden; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.15); transition: border-color 0.3s ease, transform 0.3s ease; }
        .result-item:hover { border-color: rgba(0,229,229,0.35); transform: translateY(-2px); }
        .result-item img { width: 100%; height: auto; display: block; }
        .result-caption { padding: 0.6rem 0.85rem; font-size: 0.78rem; color: var(--text-muted); text-align: center; background: var(--glass-bg); border-top: 1px solid var(--glass-border); }
        .result-caption strong { color: var(--text-white); font-weight: 600; }
        .result-interpretation { font-size: 0.85rem; line-height: 1.6; color: var(--text-muted); margin: 1rem 0; padding: 0.85rem 1rem; background: rgba(0,229,229,0.04); border-left: 3px solid var(--accent-color); border-radius: 0 0.4rem 0.4rem 0; }
        html.light .result-item { background: rgba(0,0,0,0.03); }
        html.light .result-interpretation { background: rgba(0,229,229,0.06); }
        @media (max-width: 600px) { .results-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
<canvas id="geo-canvas"></canvas>
<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand"><a href="index.html" style="text-decoration: none;"><h1>Frédéric Mirindi</h1></a></div>
    <button class="menu-toggle" aria-label="Toggle menu" onclick="toggleMenu()"><i class="fas fa-bars" id="menu-icon"></i></button>
    <div class="mobile-linkedin-nav"><a href="https://www.linkedin.com/in/fredericmirindi" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a></div>
    <div class="navbar-menu" id="navbar-menu">
      <div class="nav-links">
        <a href="index.html" class="nav-link"><i class="fas fa-home"></i> Home</a>
        <a href="research.html" class="nav-link active"><i class="fas fa-flask"></i> Research</a>
        <a href="publications.html" class="nav-link"><i class="fas fa-book"></i> Publications</a>
        <a href="conferences.html" class="nav-link"><i class="fas fa-microphone"></i> Conferences</a>
        <a href="teaching.html" class="nav-link"><i class="fas fa-graduation-cap"></i> Teaching</a>
        <a href="contact.html" class="nav-link"><i class="fas fa-envelope"></i> Contact</a>
      </div>
      <div class="social-icons-nav"><a href="https://www.linkedin.com/in/fredericmirindi" target="_blank" class="social-icon icon-linkedin" title="LinkedIn"><i class="fab fa-linkedin"></i></a></div>
    </div>
    <!-- Appearance Toggle -->
    <div class="appearance-toggle" id="appearanceToggle" role="group" aria-label="Appearance">
      <button class="theme-option" id="btn-light" onclick="setTheme('light')" title="Light mode"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg> L</button>
      <button class="theme-option" id="btn-dark" onclick="setTheme('dark')" title="Dark mode"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg> D</button>
    </div>
  </div>
</nav>

    <div class="research-hero" id="hero-banner">
      <canvas id="hero-canvas"></canvas>
      <div class="hero-content">
        <h1 class="research-hero-title">Research<span class="accent-bar"></span></h1>
      </div>
    </div>

<section class="page-section">
  <div class="card">
    <h2>Current Research</h2>
    <p><strong style="color:var(--text-white)">University of Manitoba</strong></p>
    <p>My doctoral research is conducted at the <a href="https://umanitoba.ca/arts/economics" class="inst-uofm">Department of Economics</a>, <a href="https://umanitoba.ca" class="inst-uofm">University of Manitoba</a>.</p>
    <p>My field paper focuses on <strong>Decision Theory</strong>, with particular emphasis on <strong>Random Expected Utility</strong> models.</p>
  </div>
  <div class="card">
    <h2>Francophone Immigration Research</h2>
    <p><strong style="color:var(--text-white)">Université de Saint-Boniface</strong></p>
    <p>I am currently collaborating with <a href="https://ustboniface.ca/fzellama" class="inst-usb"><strong>Professor Faiçal Zellama</strong></a>, Professeur titulaire d'économie et de gestion at the <a href="https://ustboniface.ca" class="inst-usb">Université de Saint-Boniface</a>, on research examining francophone immigration in Manitoba.</p>
    <p>Our work investigates issues of <strong>integration</strong> and <strong>systemic barriers</strong> faced by francophone immigrants in the province.</p>
  </div>
  <div class="card">
    <h2>Working Paper: AI & Currency Detection</h2>
    <p><strong style="color:var(--text-white)">YOLO Banknote Detection</strong></p>
    <p>I am currently developing a working paper with <a href="https://www.morgan.edu/school-of-architecture-and-planning/architecture-urbanism-and-built-environments/phd-student-profiles/derrick-mirindi"><strong>Derrick Mirindi</strong></a> (<a href="https://www.upenn.edu">University of Pennsylvania</a>) on the application of <strong>YOLO Algorithm</strong> for <strong>banknote detection and authentication</strong>.</p>
    <p>This research explores machine learning approaches to currency recognition and counterfeit detection systems.</p>
                    <div class="results-accordion">
                    <button class="results-toggle" onclick="var c=this.nextElementSibling;var i=this.querySelector('.toggle-icon');if(c.style.display==='none'){c.style.display='block';i.textContent='\u25BC';this.classList.add('open')}else{c.style.display='none';i.textContent='\u25B6';this.classList.remove('open')}">
                        <span class="toggle-icon">&#9654;</span> Click here for <strong>Preliminary Results</strong>
                    </button>
                    <div class="results-content" style="display:none;">
                        <div class="results-grid">
                            <div class="result-item">
                                <img src="images/20usd.jpg" alt="20 USD Banknote Detection">
                                <div class="result-caption"><strong>20 USD</strong> — Detection Output</div>
                            </div>
                            <div class="result-item">
                                <img src="images/100usd.jpg" alt="100 USD Banknote Detection">
                                <div class="result-caption"><strong>100 USD</strong> — Detection Output</div>
                            </div>
                        </div>
                        <p class="result-interpretation">The YOLOv8 model accurately identifies and localizes key security features on both the $20 and $100 banknotes, including serial numbers, Federal Reserve seals, and denomination markers, with high confidence scores (above 0.75).</p>
                        <div class="results-grid-full">
                            <div class="result-item">
                                <img src="images/yolov8s_eigencam.png" alt="YOLOv8s Eigen-CAM Visualization">
                                <div class="result-caption"><strong>YOLOv8s Eigen-CAM</strong> — Model Attention Heatmap</div>
                            </div>
                        </div>
                        <p class="result-interpretation">The Eigen-CAM activation maps reveal which regions of each banknote the model focuses on during inference. Warmer areas (red/yellow) indicate high attention zones, confirming that the model prioritizes security-relevant features such as watermarks, portraits, and denomination numerals rather than background textures.</p>
                    </div>
                </div>
  </div>
</section>

<footer><p>&copy; 2018 Frédéric Mirindi. All rights reserved.</p></footer>

<nav class="mobile-bottom-nav"><div class="mobile-bottom-nav-container">
  <a href="index.html" class="mobile-bottom-nav-item"><i class="fas fa-home"></i><span>Home</span></a>
  <a href="research.html" class="mobile-bottom-nav-item active"><i class="fas fa-flask"></i><span>Research</span></a>
  <a href="publications.html" class="mobile-bottom-nav-item"><i class="fas fa-book"></i><span>Publications</span></a>
  <a href="conferences.html" class="mobile-bottom-nav-item"><i class="fas fa-microphone"></i><span>Conferences</span></a>
  <a href="teaching.html" class="mobile-bottom-nav-item"><i class="fas fa-graduation-cap"></i><span>Teaching</span></a>
  <a href="contact.html" class="mobile-bottom-nav-item"><i class="fas fa-envelope"></i><span>Contact</span></a>
</div></nav>

<script>
function setTheme(theme) {
  const html = document.documentElement;
  html.classList.remove('dark', 'light');
  html.classList.add(theme);
  localStorage.setItem('theme', theme);
  document.getElementById('btn-light').classList.toggle('active', theme === 'light');
  document.getElementById('btn-dark').classList.toggle('active', theme === 'dark');
}
(function(){ const saved = localStorage.getItem('theme') || 'dark'; setTheme(saved); })();

function toggleMenu() {
  const menu = document.getElementById('navbar-menu');
  const icon = document.getElementById('menu-icon');
  menu.classList.toggle('active');
  if (menu.classList.contains('active')) { icon.classList.remove('fa-bars'); icon.classList.add('fa-times'); }
  else { icon.classList.remove('fa-times'); icon.classList.add('fa-bars'); }
}
document.querySelectorAll('.nav-link').forEach(link => {
  link.addEventListener('click', () => {
    const menu = document.getElementById('navbar-menu');
    const icon = document.getElementById('menu-icon');
    menu.classList.remove('active');
    icon.classList.remove('fa-times'); icon.classList.add('fa-bars');
  });
});
(function() {
  const canvas = document.getElementById('geo-canvas');
  const ctx = canvas.getContext('2d');
  let w, h, points, maxDist;
  function resize() { w = canvas.width = canvas.offsetWidth; h = canvas.height = canvas.offsetHeight; maxDist = 160; initPoints(); }
  function initPoints() { const count = Math.floor((w * h) / 12000); points = []; for (let i = 0; i < count; i++) { points.push({ x: Math.random() * w, y: Math.random() * h, vx: (Math.random() - 0.5) * 0.3, vy: (Math.random() - 0.5) * 0.3 }); } }
  function draw() {
    ctx.clearRect(0, 0, w, h);
    const isLight = document.documentElement.classList.contains('light');
    const c = isLight ? '80, 100, 120' : '200, 200, 200';
    for (let p of points) { p.x += p.vx; p.y += p.vy; if (p.x < 0 || p.x > w) p.vx *= -1; if (p.y < 0 || p.y > h) p.vy *= -1; }
    for (let i = 0; i < points.length; i++) { for (let j = i + 1; j < points.length; j++) { const dx = points[i].x - points[j].x; const dy = points[i].y - points[j].y; const dist = Math.sqrt(dx * dx + dy * dy); if (dist < maxDist) { const alpha = (1 - dist / maxDist) * 0.15; ctx.strokeStyle = 'rgba(' + c + ', ' + alpha + ')'; ctx.lineWidth = 0.5; ctx.beginPath(); ctx.moveTo(points[i].x, points[i].y); ctx.lineTo(points[j].x, points[j].y); ctx.stroke(); } } }
    for (let p of points) { ctx.fillStyle = 'rgba(' + c + ', 0.25)'; ctx.beginPath(); ctx.arc(p.x, p.y, 1.5, 0, Math.PI * 2); ctx.fill(); }
    requestAnimationFrame(draw);
  }
  window.addEventListener('resize', resize); resize(); draw();
})();
</script>
<script>
(function(){
  const canvas = document.getElementById('hero-canvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let w, h, nodes = [], edges = [], pulses = [], mouse = {x: -1000, y: -1000};
  const nodeCount = 80, connectionDist = 150;

  function resize() {
    const rect = canvas.parentElement.getBoundingClientRect();
    w = canvas.width = rect.width;
    h = canvas.height = rect.height;
    initNodes();
  }

  function initNodes() {
    nodes = [];
    for(let i = 0; i < nodeCount; i++) {
      nodes.push({
        x: Math.random() * w, y: Math.random() * h,
        vx: (Math.random() - 0.5) * 0.6, vy: (Math.random() - 0.5) * 0.6,
        r: Math.random() * 2 + 1, pulse: Math.random() * Math.PI * 2,
        type: Math.random() > 0.85 ? 'hub' : 'node'
      });
    }
  }

  function draw() {
    ctx.clearRect(0, 0, w, h);
    const isLight = document.documentElement.classList.contains('light');
    const accentR = isLight ? 8 : 0, accentG = isLight ? 145 : 229, accentB = isLight ? 178 : 229;

    // Update positions
    for(let n of nodes) {
      n.x += n.vx; n.y += n.vy; n.pulse += 0.02;
      if(n.x < 0 || n.x > w) n.vx *= -1;
      if(n.y < 0 || n.y > h) n.vy *= -1;
      // Mouse interaction
      const dx = n.x - mouse.x, dy = n.y - mouse.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if(dist < 180) { n.vx += dx/dist * 0.05; n.vy += dy/dist * 0.05; }
      n.vx *= 0.99; n.vy *= 0.99;
    }

    // Draw connections
    for(let i = 0; i < nodes.length; i++) {
      for(let j = i+1; j < nodes.length; j++) {
        const dx = nodes[i].x - nodes[j].x, dy = nodes[i].y - nodes[j].y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < connectionDist) {
          const alpha = (1 - dist/connectionDist) * 0.35;
          ctx.strokeStyle = 'rgba('+accentR+','+accentG+','+accentB+','+alpha+')';
          ctx.lineWidth = 0.8;
          ctx.beginPath(); ctx.moveTo(nodes[i].x, nodes[i].y); ctx.lineTo(nodes[j].x, nodes[j].y); ctx.stroke();
        }
      }
    }

    // Draw nodes with glow
    for(let n of nodes) {
      const glowSize = n.type === 'hub' ? 12 : 6;
      const pulseAlpha = 0.15 + Math.sin(n.pulse) * 0.1;
      const grad = ctx.createRadialGradient(n.x, n.y, 0, n.x, n.y, glowSize);
      grad.addColorStop(0, 'rgba('+accentR+','+accentG+','+accentB+','+pulseAlpha * 2+')');
      grad.addColorStop(1, 'rgba('+accentR+','+accentG+','+accentB+',0)');
      ctx.fillStyle = grad;
      ctx.beginPath(); ctx.arc(n.x, n.y, glowSize, 0, Math.PI*2); ctx.fill();

      const coreR = n.type === 'hub' ? n.r * 2 : n.r;
      ctx.fillStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(0.7 + Math.sin(n.pulse)*0.3)+')';
      ctx.beginPath(); ctx.arc(n.x, n.y, coreR, 0, Math.PI*2); ctx.fill();
    }

    // Travelling pulses along edges
    if(Math.random() < 0.03 && nodes.length > 1) {
      const a = Math.floor(Math.random()*nodes.length);
      let b = Math.floor(Math.random()*nodes.length);
      if(a !== b) {
        const dx = nodes[a].x - nodes[b].x, dy = nodes[a].y - nodes[b].y;
        if(Math.sqrt(dx*dx+dy*dy) < connectionDist) {
          pulses.push({from: a, to: b, t: 0});
        }
      }
    }
    for(let i = pulses.length-1; i >= 0; i--) {
      const p = pulses[i]; p.t += 0.025;
      if(p.t > 1) { pulses.splice(i,1); continue; }
      const x = nodes[p.from].x + (nodes[p.to].x - nodes[p.from].x) * p.t;
      const y = nodes[p.from].y + (nodes[p.to].y - nodes[p.from].y) * p.t;
      ctx.fillStyle = 'rgba('+accentR+','+accentG+','+accentB+',0.9)';
      ctx.beginPath(); ctx.arc(x, y, 2.5, 0, Math.PI*2); ctx.fill();
      const pg = ctx.createRadialGradient(x, y, 0, x, y, 10);
      pg.addColorStop(0, 'rgba('+accentR+','+accentG+','+accentB+',0.4)');
      pg.addColorStop(1, 'rgba('+accentR+','+accentG+','+accentB+',0)');
      ctx.fillStyle = pg; ctx.beginPath(); ctx.arc(x, y, 10, 0, Math.PI*2); ctx.fill();
    }

    // Draw scholar silhouette (person head + book)
    (function drawScholar() {
      const cx = w * 0.15, cy = h * 0.55, sc = Math.min(w, h) * 0.0028;
      const alpha = isLight ? 0.07 : 0.06;
      ctx.save();
      ctx.translate(cx, cy); ctx.scale(sc, sc);
      ctx.fillStyle = 'rgba('+accentR+','+accentG+','+accentB+','+alpha+')';
      ctx.strokeStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*2.5)+')';
      ctx.lineWidth = 1.5/sc;
      // Head
      ctx.beginPath(); ctx.arc(0, -55, 35, 0, Math.PI*2); ctx.fill(); ctx.stroke();
      // Neck
      ctx.beginPath(); ctx.moveTo(-10, -22); ctx.lineTo(-12, 5); ctx.lineTo(12, 5); ctx.lineTo(10, -22); ctx.fill(); ctx.stroke();
      // Shoulders & upper body
      ctx.beginPath(); ctx.moveTo(-12, 5); ctx.quadraticCurveTo(-55, 10, -65, 50); ctx.lineTo(-60, 95); ctx.lineTo(60, 95); ctx.lineTo(65, 50); ctx.quadraticCurveTo(55, 10, 12, 5); ctx.fill(); ctx.stroke();
      // Book held open in front
      ctx.fillStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*1.5)+')';
      // Left page
      ctx.beginPath(); ctx.moveTo(-5, 40); ctx.lineTo(-48, 30); ctx.lineTo(-50, 72); ctx.lineTo(-5, 78); ctx.closePath(); ctx.fill(); ctx.stroke();
      // Right page
      ctx.beginPath(); ctx.moveTo(5, 40); ctx.lineTo(48, 30); ctx.lineTo(50, 72); ctx.lineTo(5, 78); ctx.closePath(); ctx.fill(); ctx.stroke();
      // Book spine
      ctx.beginPath(); ctx.moveTo(-5, 38); ctx.lineTo(-5, 80); ctx.moveTo(5, 38); ctx.lineTo(5, 80); ctx.stroke();
      // Page lines on left
      ctx.strokeStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*1.8)+')';
      ctx.lineWidth = 0.8/sc;
      for(var li=0; li<4; li++) { var ly=44+li*8; ctx.beginPath(); ctx.moveTo(-42, ly); ctx.lineTo(-10, ly+2); ctx.stroke(); }
      // Page lines on right
      for(var li=0; li<4; li++) { var ly=44+li*8; ctx.beginPath(); ctx.moveTo(42, ly); ctx.lineTo(10, ly+2); ctx.stroke(); }
      // Hair suggestion
      ctx.strokeStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*2)+')';
      ctx.lineWidth = 2/sc;
      ctx.beginPath(); ctx.arc(0, -60, 33, -Math.PI*0.85, -Math.PI*0.15); ctx.stroke();
      ctx.restore();
    })();

    // Draw second scholar on right side
    (function drawScholar2() {
      const cx = w * 0.85, cy = h * 0.52, sc = Math.min(w, h) * 0.0024;
      const alpha = isLight ? 0.05 : 0.045;
      ctx.save();
      ctx.translate(cx, cy); ctx.scale(sc, sc);
      ctx.fillStyle = 'rgba('+accentR+','+accentG+','+accentB+','+alpha+')';
      ctx.strokeStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*2.5)+')';
      ctx.lineWidth = 1.5/sc;
      // Head
      ctx.beginPath(); ctx.arc(0, -55, 35, 0, Math.PI*2); ctx.fill(); ctx.stroke();
      // Neck
      ctx.beginPath(); ctx.moveTo(-10, -22); ctx.lineTo(-12, 5); ctx.lineTo(12, 5); ctx.lineTo(10, -22); ctx.fill(); ctx.stroke();
      // Shoulders
      ctx.beginPath(); ctx.moveTo(-12, 5); ctx.quadraticCurveTo(-55, 10, -65, 50); ctx.lineTo(-60, 95); ctx.lineTo(60, 95); ctx.lineTo(65, 50); ctx.quadraticCurveTo(55, 10, 12, 5); ctx.fill(); ctx.stroke();
      // Book - tilted slightly
      ctx.rotate(-0.15);
      ctx.fillStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*1.5)+')';
      ctx.beginPath(); ctx.moveTo(-5, 40); ctx.lineTo(-48, 30); ctx.lineTo(-50, 72); ctx.lineTo(-5, 78); ctx.closePath(); ctx.fill(); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(5, 40); ctx.lineTo(48, 30); ctx.lineTo(50, 72); ctx.lineTo(5, 78); ctx.closePath(); ctx.fill(); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(-5, 38); ctx.lineTo(-5, 80); ctx.moveTo(5, 38); ctx.lineTo(5, 80); ctx.stroke();
      ctx.strokeStyle = 'rgba('+accentR+','+accentG+','+accentB+','+(alpha*1.8)+')';
      ctx.lineWidth = 0.8/sc;
      for(var li=0; li<4; li++) { var ly=44+li*8; ctx.beginPath(); ctx.moveTo(-42, ly); ctx.lineTo(-10, ly+2); ctx.stroke(); }
      for(var li=0; li<4; li++) { var ly=44+li*8; ctx.beginPath(); ctx.moveTo(42, ly); ctx.lineTo(10, ly+2); ctx.stroke(); }
      ctx.restore();
    })();
    requestAnimationFrame(draw);
  }

  canvas.parentElement.addEventListener('mousemove', function(e) {
    const rect = canvas.getBoundingClientRect();
    mouse.x = e.clientX - rect.left; mouse.y = e.clientY - rect.top;
  });
  canvas.parentElement.addEventListener('mouseleave', function() { mouse.x = -1000; mouse.y = -1000; });
  window.addEventListener('resize', resize);
  resize(); draw();
})();
</script>
</body>
</html>
