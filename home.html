<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fr√©d√©ric Mirindi - Home</title>
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <meta name="description" content="Leading researcher specializing in artificial intelligence applications in economic analysis, machine learning models for economic forecasting and policy analysis.">
    <meta name="keywords" content="AI, Economics, Machine Learning, Economic Forecasting, Policy Analysis, Frederic Mirindi">
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Economics AI Chatbot CSS -->
    <link rel="stylesheet" href="assets/css/economics-chatbot.css">
    
    <!-- Economic Widgets CSS -->
    <link rel="stylesheet" href="assets/css/economic-widgets.css">
    
    <!-- Publications Showcase CSS -->
    <link rel="stylesheet" href="assets/css/publications-showcase.css">
    
    <!-- Research Widgets CSS -->
    <link rel="stylesheet" href="assets/css/research-widgets.css">
    
    <!-- Profile Links White Text CSS -->
    <link rel="stylesheet" href="assets/css/profile-links-white.css">
    
    <!-- Profile Icons Fix CSS (CRITICAL - Must be last to override other styles) -->
    <link rel="stylesheet" href="assets/css/profile-icons-fix.css">
    
    <!-- Icon Visibility CSS - Theme-aware icon display (MUST be after profile-icons-fix) -->
    <link rel="stylesheet" href="assets/css/icon-visibility.css">
    
    <!-- CRITICAL: Footer Icons Fix - MUST BE LAST TO OVERRIDE ALL OTHER STYLES -->
    <link rel="stylesheet" href="assets/css/footer-icons-fix.css">
    
    <!-- Chart.js for data visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- Navigation -->
<nav class="navbar" id="navbar">
    <div class="nav-container">
        <div class="nav-brand">
            <span class="hero-nom-clean">Fr√©d√©ric Mirindi</span>
        </div>
        <ul class="nav-menu" id="nav-menu">
            <li class="nav-item">
                <a href="home.html" class="nav-link active">Home</a>
            </li>
            <li class="nav-item">
                <a href="research.html" class="nav-link">Publications</a>
            </li>
            <li class="nav-item">
                <a href="conference.html" class="nav-link">Conferences</a>
            </li>
            <li class="nav-item">
                <a href="research.html" class="nav-link">Research</a>
            </li>
            <li class="nav-item">
                <a href="blog.html" class="nav-link">Blog</a>
            </li>
            <li class="nav-item">
                <a href="about.html" class="nav-link">About</a>
            </li>
            <li class="nav-item">
                <a href="contact.html" class="nav-link">Contact</a>
            </li>
        </ul>
        <div class="nav-controls">
            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                <span class="theme-icon">üåô</span>
            </button>
            <button class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </div>
</nav>

<!-- Main Content -->
<main class="main-content">
  <section class="page active" id="home">
    <div class="hero-section" style="position: relative; overflow: hidden;">
      <!-- AI/ML Background Canvas -->
      <canvas id="aiCanvas" class="ai-background-canvas"></canvas>
      
      <!-- Keep existing animated shapes -->
      <div class="hero-background"></div>
      <div class="floating-shape shape-1"></div>
      <div class="floating-shape shape-2"></div>
      <div class="floating-shape shape-3"></div>
      <div class="floating-shape shape-4"></div>
      <div class="floating-shape shape-5"></div>
  
      <div class="container">
        <div class="hero-content">
          <div class="hero-text">
            <h1 class="hero-title">
              <span class="typing-text">Fr√©d√©ric Mirindi</span>
            </h1>
            <p class="hero-subtitle">PhD Candidate - Economics & Econometrics</p>
            <p class="hero-subtitle">Founder - ThinkBit Edge Corp.</p>
            <p class="hero-description">
              Leading researcher specializing in artificial intelligence applications in economic analysis, 
              with extensive experience in machine learning models for economic forecasting and policy analysis.
              Find below my research on ResearchGate, Google Scholar, and ORCID. 
            </p>
            <div class="hero-buttons">
              <a class="btn btn--outline research-profile-link" 
                 href="https://www.researchgate.net/profile/Frederic-Mirindi" 
                 target="_blank" 
                 rel="noopener">
                <img src="images/researchgate-icon.svg" 
                     alt="ResearchGate icon" 
                     style="vertical-align:middle; width:20px; height:20px; margin-right:8px;" />
                ResearchGate Profile
              </a>
              <a class="btn btn--outline research-profile-link" 
                 href="https://scholar.google.com/citations?hl=fr&user=K5--CxAAAAAJ&view_op=list_works&sortby=pubdate" 
                 target="_blank" 
                 rel="noopener">
                <img src="images/google-scholar-icon.svg" 
                     alt="Google Scholar icon" 
                     style="vertical-align:middle; width:20px; height:20px; margin-right:8px;" />
                Google Scholar Profile
              </a>
              <a class="btn btn--outline research-profile-link" 
                 href="https://orcid.org/0009-0001-1798-9914" 
                 target="_blank" 
                 rel="noopener">
                <img src="images/orcid-icon.svg" 
                     alt="ORCID iD icon" 
                     style="vertical-align:middle; width:16px; height:16px; margin-right:6px;" />
                ORCID Profile
              </a>
            </div>
          </div>
          <div class="hero-image">
            <div class="profile-container">
              <div class="profile-image">
                <div class="circle">
                  <img src="frederic.mirindi.jpg" alt="Frederic Mirindi" class="profile-photo">
                </div>
              </div>
              <!-- Collaboration Section with Reduced Size -->
              <div class="collaboration-section">
                <p id="collaborationText" class="collaboration-text collaboration-text-small">
                  Open for Collaboration
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Email Modal -->
    <div id="emailModal" class="email-modal hidden">
      <div class="email-content">
        <span class="close-modal">&times;</span>
        <h3>Let's Connect!</h3>
        <p>Reach out for collaboration opportunities:</p>
        <div class="email-display">
          <i class="fas fa-envelope"></i>
          <span id="emailText">frederic.mirindi@umanitoba.ca</span>
          <button id="copyEmailBtn" class="copy-btn">
            <i class="fas fa-copy"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Continue with rest of home page content... -->
    <div class="highlights-section">
      <div class="container">
        <h2 class="widget-section-title">Key Achievements</h2>
        <div class="highlights-grid">
          <div class="highlight-card">
            <h3>20+</h3>
            <p>Published Papers</p>
          </div>
          <div class="highlight-card">
            <h3>25+</h3>
            <p>Conference Presentations</p>
          </div>
          <div class="highlight-card">
            <h3>15+</h3>
            <p>AI Models Developed</p>
          </div>
          <div class="highlight-card">
            <h3>5+</h3>
            <p>Years Experience</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Live Information Dashboard Section with Title and Scrolling Animation -->
    <section class="widget-responsive-section">
      <div class="container">
        <h2 class="widget-section-title">Live Information Dashboard</h2>
        
        <!-- First Row - Existing Widgets -->
        <div class="widget-cards-row">
          <!-- Local Time Card -->
          <div class="widget-card widget-time">
            <div class="widget-card-icon" aria-hidden="true">üïì</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Local Time</div>
              <div class="widget-time-main" id="watch-time">11:28</div>
              <div class="widget-card-secondary">Winnipeg, MB</div>
              <div class="widget-card-caption">Synchronized with Winnipeg local time.</div>
            </div>
          </div>
          <!-- Weather Card -->
          <div class="widget-card widget-weather">
            <div class="widget-card-icon" aria-hidden="true">üå§Ô∏è</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Weather</div>
              <div class="widget-weather-main">
                <span class="widget-weather-icon" id="weather-icon">‚òÄÔ∏è</span>
                <span class="widget-weather-temp" id="weather-temp">25¬∞C</span>
              </div>
              <div class="widget-weather-desc" id="weather-desc">Sunny</div>
              <div class="widget-card-secondary">Winnipeg, MB</div>
              <div class="widget-card-caption">Weather auto-updates every 10 min.</div>
            </div>
          </div>
          <!-- Quote Card -->
          <div class="widget-card widget-quote">
            <div class="widget-card-icon" aria-hidden="true">üí°</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Quote of the Day</div>
              <div class="widget-quote-main" id="fact-box">
                "Economics is the study of how society manages its scarce resources."
              </div>
              <div class="widget-card-caption">Discover fresh economic wisdom each day!</div>
            </div>
          </div>
          <!-- Cryptocurrency Bitcoin Card -->
          <div class="widget-card widget-crypto">
            <div class="widget-card-icon" aria-hidden="true">‚Çø</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Bitcoin Price</div>
              <div class="widget-crypto-main">
                <span class="widget-crypto-price" id="crypto-price">$65,420</span>
              </div>
              <div class="widget-crypto-change" id="crypto-change">
                <span class="crypto-positive">+2.34% (24h)</span>
              </div>
              <div class="widget-card-secondary">Live Market Data</div>
              <div class="widget-card-caption">Updated every 5 minutes from CoinGecko API.</div>
            </div>
          </div>
        </div>
        
        <!-- Second Row - NEW INNOVATIVE ECONOMIC WIDGETS -->
        <div class="widget-cards-row" style="margin-top: 20px;">
          <!-- Economic Calendar Widget -->
          <div class="widget-card widget-economic-calendar">
            <div class="widget-card-icon" aria-hidden="true">üìÖ</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Economic Calendar</div>
              <div class="widget-calendar-events" id="economic-events">
                <div class="event-item high-impact">
                  <span class="event-time">09:30</span>
                  <span class="event-title">US CPI (YoY)</span>
                  <span class="event-impact">üî¥</span>
                </div>
                <div class="event-item medium-impact">
                  <span class="event-time">11:00</span>
                  <span class="event-title">CAD Retail Sales</span>
                  <span class="event-impact">üü°</span>
                </div>
                <div class="event-item low-impact">
                  <span class="event-time">14:15</span>
                  <span class="event-title">USD Fed Speech</span>
                  <span class="event-impact">üü¢</span>
                </div>
              </div>
              <div class="widget-card-secondary">Today's Key Events</div>
              <div class="widget-card-caption">Track market-moving economic releases in real-time.</div>
            </div>
          </div>
          
          <!-- Global Market Sentiment Tracker -->
          <div class="widget-card widget-market-sentiment">
            <div class="widget-card-icon" aria-hidden="true">üìà</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Market Sentiment</div>
              <div class="sentiment-gauge" id="sentiment-gauge">
                <div class="gauge-container">
                  <div class="gauge-fill" id="gauge-fill" style="transform: rotate(45deg);"></div>
                  <div class="gauge-center">
                    <span class="sentiment-value" id="sentiment-value">72</span>
                    <span class="sentiment-label">Bullish</span>
                  </div>
                </div>
              </div>
              <div class="sentiment-indicators">
                <div class="indicator">
                  <span class="indicator-label">Fear & Greed:</span>
                  <span class="indicator-value bullish" id="fear-greed">72</span>
                </div>
                <div class="indicator">
                  <span class="indicator-label">VIX:</span>
                  <span class="indicator-value neutral" id="vix-value">18.5</span>
                </div>
              </div>
              <div class="widget-card-secondary">Global Markets</div>
              <div class="widget-card-caption">Real-time sentiment analysis from multiple indicators.</div>
            </div>
          </div>
          
          <!-- Interest Rates Monitor -->
          <div class="widget-card widget-interest-rates">
            <div class="widget-card-icon" aria-hidden="true">üè¶</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Central Bank Rates</div>
              <div class="rates-list" id="interest-rates">
                <div class="rate-item">
                  <span class="country-flag">üá∫üá∏</span>
                  <span class="rate-info">
                    <span class="rate-country">Fed Fund Rate</span>
                    <span class="rate-value">5.25%</span>
                  </span>
                  <span class="rate-change unchanged">-</span>
                </div>
                <div class="rate-item">
                  <span class="country-flag">üá®üá¶</span>
                  <span class="rate-info">
                    <span class="rate-country">BoC Rate</span>
                    <span class="rate-value">4.75%</span>
                  </span>
                  <span class="rate-change down">‚ñº</span>
                </div>
                <div class="rate-item">
                  <span class="country-flag">üá™üá∫</span>
                  <span class="rate-info">
                    <span class="rate-country">ECB Rate</span>
                    <span class="rate-value">4.25%</span>
                  </span>
                  <span class="rate-change unchanged">-</span>
                </div>
              </div>
              <div class="widget-card-secondary">Key Central Banks</div>
              <div class="widget-card-caption">Monitor global monetary policy changes.</div>
            </div>
          </div>
          
          <!-- Economic Indicators Tracker -->
          <div class="widget-card widget-economic-indicators">
            <div class="widget-card-icon" aria-hidden="true">üìä</div>
            <div class="widget-card-content">
              <div class="widget-card-title">Key Indicators</div>
              <div class="indicators-grid" id="economic-indicators">
                <div class="indicator-item">
                  <span class="indicator-name">GDP Growth</span>
                  <span class="indicator-value positive">+2.1%</span>
                </div>
                <div class="indicator-item">
                  <span class="indicator-name">Inflation Rate</span>
                  <span class="indicator-value neutral">3.2%</span>
                </div>
                <div class="indicator-item">
                  <span class="indicator-name">Unemployment</span>
                  <span class="indicator-value positive">3.7%</span>
                </div>
                <div class="indicator-item">
                  <span class="indicator-name">Job Growth</span>
                  <span class="indicator-value positive">+187K</span>
                </div>
              </div>
              <div class="widget-card-secondary">US Economy</div>
              <div class="widget-card-caption">Real-time economic health monitoring.</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </section>
</main>

<!-- Footnotes Modal -->
<div class="footnote-modal" id="footnote-modal">
    <div class="footnote-content">
        <div class="footnote-header">
            <h3>Citations & References</h3>
            <button class="footnote-close">&times;</button>
        </div>
        <div class="footnote-body">
            <p>Citation information and academic references will be displayed here.</p>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Fr√©d√©ric Mirindi</h4>
                <p>PhD Candidate - Economics &amp; Econometrics</p>
                <p>Founder - ThinkBit Edge Corp.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="research.html">Publications</a></li>
                    <li><a href="conference.html">Conferences</a></li>
                    <li><a href="research.html">Research</a></li>
                    <li><a href="blog.html">Blog</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>frederic.mirindi@umanitoba.ca</p>
                <p>+1 (204) 298-4337</p>
                <div style="margin-top:10px; display:flex; gap:15px; align-items:center;">
                    <!-- LinkedIn Icon - Using Local Image File -->
                    <a href="https://www.linkedin.com/in/fredericmirindi" target="_blank" rel="noopener" title="LinkedIn" style="display:inline-flex;align-items:center;">
                        <img src="images/linkedin-icon.svg" alt="LinkedIn" style="width:24px;height:24px;" class="footer-social-icon">
                    </a>

                    <!-- X (Twitter) Icon - Using Local Image File -->
                    <a href="https://x.com/MirindiFrederic" target="_blank" rel="noopener" title="X (formerly Twitter)" style="display:inline-flex;align-items:center;">
                        <img src="images/x-icon.svg" alt="X" style="width:24px;height:24px;" class="footer-social-icon">
                    </a>

                    <!-- ResearchGate Icon - Using Local Colored SVG -->
                    <a href="https://www.researchgate.net/profile/Frederic-Mirindi" target="_blank" rel="noopener" title="ResearchGate" style="display:inline-flex;align-items:center;">
                        <img src="images/researchgate-icon.svg" alt="ResearchGate" style="width:24px;height:24px;" class="footer-academic-icon">
                    </a>

                    <!-- Google Scholar Icon - Using Local Colored SVG -->
                    <a href="https://scholar.google.com/citations?hl=fr&user=K5--CxAAAAAJ&view_op=list_works&sortby=pubdate" target="_blank" rel="noopener" title="Google Scholar" style="display:inline-flex;align-items:center;">
                        <img src="images/google-scholar-icon.svg" alt="Google Scholar" style="width:24px;height:24px;" class="footer-academic-icon">
                    </a>

                    <!-- ORCID Icon - Using Local Colored SVG -->
                    <a href="https://orcid.org/0009-0001-1798-9914" target="_blank" rel="noopener" title="ORCID" style="display:inline-flex;align-items:center;">
                        <img src="images/orcid-icon.svg" alt="ORCID iD" style="width:24px;height:24px;" class="footer-academic-icon">
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2020 Fr√©d√©ric Mirindi. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Page-specific JavaScript for home.html -->
<script>
// Home page specific functionality
document.addEventListener('DOMContentLoaded', function() {
    initializeTheme();
    initializeNavigation();
    initializeInteractiveElements();
    initializeAIBackground();
    initializeEconomicWidgets();
});

// Theme toggle
function initializeTheme() {
    const themeToggle = document.getElementById('theme-toggle');
    let isDarkMode = localStorage.getItem('theme') === 'dark' || 
                    window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    document.documentElement.setAttribute('data-color-scheme', isDarkMode ? 'dark' : 'light');
    updateThemeIcon();

    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
}

function toggleTheme() {
    const isDarkMode = document.documentElement.getAttribute('data-color-scheme') === 'dark';
    const newTheme = isDarkMode ? 'light' : 'dark';
    document.documentElement.setAttribute('data-color-scheme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateThemeIcon();
}

function updateThemeIcon() {
    const icon = document.querySelector('#theme-toggle .theme-icon');
    if (icon) {
        const isDark = document.documentElement.getAttribute('data-color-scheme') === 'dark';
        icon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
    }
}

// Mobile navigation
function initializeNavigation() {
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    
    if (navToggle && navMenu) {
        navToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
        });
    }
}

// Interactive elements
function initializeInteractiveElements() {
    initializeConsultation();
}

function initializeConsultation() {
    const collaborationText = document.getElementById('collaborationText');
    const emailModal = document.getElementById('emailModal');
    const closeModal = document.querySelector('.close-modal');
    const copyEmailBtn = document.getElementById('copyEmailBtn');
    const emailText = document.getElementById('emailText');
    
    if (collaborationText && emailModal) {
        collaborationText.style.cursor = 'pointer';
        collaborationText.addEventListener('click', () => {
            emailModal.classList.remove('hidden');
            emailModal.classList.add('show');
        });
    }
    
    if (closeModal && emailModal) {
        closeModal.addEventListener('click', () => {
            emailModal.classList.remove('show');
            setTimeout(() => emailModal.classList.add('hidden'), 300);
        });
    }
    
    if (copyEmailBtn && emailText) {
        copyEmailBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(emailText.textContent);
                const originalHTML = copyEmailBtn.innerHTML;
                copyEmailBtn.innerHTML = '<i class="fas fa-check"></i>';
                copyEmailBtn.style.background = '#00ff88';
                setTimeout(() => {
                    copyEmailBtn.innerHTML = originalHTML;
                    copyEmailBtn.style.background = '';
                }, 2000);
            } catch (err) {
                console.log('Clipboard not available');
            }
        });
    }

    // Close modal when clicking outside
    if (emailModal) {
        emailModal.addEventListener('click', (e) => {
            if (e.target === emailModal) {
                emailModal.classList.remove('show');
                setTimeout(() => emailModal.classList.add('hidden'), 300);
            }
        });
    }

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && emailModal && emailModal.classList.contains('show')) {
            emailModal.classList.remove('show');
            setTimeout(() => emailModal.classList.add('hidden'), 300);
        }
    });
}

// AI Background Animation
function initializeAIBackground() {
    const aiCanvas = document.getElementById('aiCanvas');
    if (!aiCanvas) return;
    
    const ctx = aiCanvas.getContext('2d');
    let nodes = [];
    let connections = [];
    let particles = [];
    let animationId;
    
    function resizeCanvas() {
        const rect = aiCanvas.parentElement.getBoundingClientRect();
        aiCanvas.width = rect.width;
        aiCanvas.height = rect.height;
    }
    
    function createNodes() {
        nodes = [];
        const nodeCount = Math.min(Math.floor((aiCanvas.width * aiCanvas.height) / 15000), 50);
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push({
                x: Math.random() * aiCanvas.width,
                y: Math.random() * aiCanvas.height,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5,
                radius: Math.random() * 3 + 2,
                opacity: Math.random() * 0.5 + 0.3,
                pulsePhase: Math.random() * Math.PI * 2,
                connections: 0
            });
        }
    }
    
    function createConnections() {
        connections = [];
        const maxDistance = 150;
        
        for (let i = 0; i < nodes.length; i++) {
            for (let j = i + 1; j < nodes.length; j++) {
                const dx = nodes[i].x - nodes[j].x;
                const dy = nodes[i].y - nodes[j].y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < maxDistance) {
                    connections.push({
                        nodeA: i,
                        nodeB: j,
                        strength: 1 - (distance / maxDistance),
                        pulsePhase: Math.random() * Math.PI * 2
                    });
                    nodes[i].connections++;
                    nodes[j].connections++;
                }
            }
        }
    }
    
    function animate() {
        if (!aiCanvas || !ctx) return;
        
        ctx.clearRect(0, 0, aiCanvas.width, aiCanvas.height);
        
        const time = Date.now() * 0.001;
        
        // Draw connections
        ctx.strokeStyle = 'rgba(0, 255, 136, 0.3)';
        connections.forEach(conn => {
            const nodeA = nodes[conn.nodeA];
            const nodeB = nodes[conn.nodeB];
            
            if (!nodeA || !nodeB) return;
            
            const pulse = Math.sin(time * 2 + conn.pulsePhase) * 0.5 + 0.5;
            const opacity = conn.strength * 0.4 * pulse;
            
            ctx.globalAlpha = opacity;
            ctx.lineWidth = 1 + pulse;
            ctx.beginPath();
            ctx.moveTo(nodeA.x, nodeA.y);
            ctx.lineTo(nodeB.x, nodeB.y);
            ctx.stroke();
        });
        
        // Update and draw nodes
        nodes.forEach((node) => {
            // Update position
            node.x += node.vx;
            node.y += node.vy;
            
            // Bounce off edges
            if (node.x <= 0 || node.x >= aiCanvas.width) node.vx *= -1;
            if (node.y <= 0 || node.y >= aiCanvas.height) node.vy *= -1;
            
            // Keep within bounds
            node.x = Math.max(0, Math.min(aiCanvas.width, node.x));
            node.y = Math.max(0, Math.min(aiCanvas.height, node.y));
            
            // Calculate pulse
            const pulse = Math.sin(time * 3 + node.pulsePhase) * 0.3 + 0.7;
            const finalRadius = node.radius * pulse;
            
            // Draw node
            const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, finalRadius * 2);
            gradient.addColorStop(0, `rgba(0, 255, 136, ${node.opacity * pulse})`);
            gradient.addColorStop(0.5, `rgba(50, 184, 198, ${node.opacity * 0.6 * pulse})`);
            gradient.addColorStop(1, 'rgba(0, 255, 136, 0)');
            
            ctx.fillStyle = gradient;
            ctx.globalAlpha = 1;
            ctx.beginPath();
            ctx.arc(node.x, node.y, finalRadius * 2, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw core
            ctx.fillStyle = `rgba(255, 255, 255, ${node.opacity * pulse})`;
            ctx.beginPath();
            ctx.arc(node.x, node.y, finalRadius * 0.3, 0, Math.PI * 2);
            ctx.fill();
        });
        
        ctx.globalAlpha = 1;
        animationId = requestAnimationFrame(animate);
    }
    
    resizeCanvas();
    createNodes();
    createConnections();
    animate();
    
    window.addEventListener('resize', () => {
        resizeCanvas();
        createNodes();
        createConnections();
    });
}

// Economic Widgets
function initializeEconomicWidgets() {
    updateWinnipegTime();
    updateWinnipegWeather();
    updateBitcoinPrice();
    updateEconomicCalendar();
    updateMarketSentiment();
    updateCentralBankRates();
    updateEconomicIndicators();
    displayRandomFact();
    
    setInterval(updateWinnipegTime, 1000);
    setInterval(updateWinnipegWeather, 10 * 60 * 1000);
    setInterval(updateBitcoinPrice, 5 * 60 * 1000);
    setInterval(updateEconomicCalendar, 60 * 60 * 1000);
    setInterval(updateMarketSentiment, 15 * 60 * 1000);
    setInterval(updateCentralBankRates, 30 * 60 * 1000);
    setInterval(updateEconomicIndicators, 30 * 60 * 1000);
    setInterval(displayRandomFact, 30 * 60 * 1000);
}

function updateWinnipegTime() {
    const watchSpan = document.getElementById('watch-time');
    if (watchSpan) {
        const now = new Date();
        const timeString = now.toLocaleTimeString("en-CA", { hour12: false, timeZone: "America/Winnipeg" });
        watchSpan.textContent = timeString;
    }
}

async function updateWinnipegWeather() {
    const tempSpan = document.getElementById('weather-temp');
    const descSpan = document.getElementById('weather-desc');
    const iconSpan = document.getElementById('weather-icon');
    if (!tempSpan || !descSpan || !iconSpan) return;

    try {
        const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=49.8951&longitude=-97.1384&current_weather=true');
        const data = await response.json();
        const temp = Math.round(data.current_weather.temperature);
        const code = data.current_weather.weathercode;

        let description = "Clear", icon = "‚òÄÔ∏è";
        if (code >= 51 && code < 70) { icon = "üåßÔ∏è"; description = "Rain"; }
        else if (code >= 71 && code < 80) { icon = "‚ùÑÔ∏è"; description = "Snow"; }
        else if (code === 0) { icon = "‚òÄÔ∏è"; description = "Sunny"; }
        else if (code > 2 && code < 5) { icon = "‚õÖ"; description = "Partly Cloudy"; }

        tempSpan.textContent = temp + "¬∞C";
        descSpan.textContent = description;
        iconSpan.textContent = icon;
    } catch (error) {
        tempSpan.textContent = "22¬∞C";
        descSpan.textContent = "Partly Cloudy";
        iconSpan.textContent = "‚õÖ";
    }
}

async function updateBitcoinPrice() {
    const priceElement = document.getElementById('crypto-price');
    const changeElement = document.getElementById('crypto-change');
    if (!priceElement || !changeElement) return;
    
    try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=cad&include_24hr_change=true');
        const data = await response.json();
        const btcData = data.bitcoin;
        
        if (btcData) {
            const price = btcData.cad;
            const change24h = btcData.cad_24h_change;
            
            priceElement.textContent = `CA$${price.toLocaleString('en-CA', { maximumFractionDigits: 0 })}`;
            
            const changePercent = change24h.toFixed(2);
            const changeClass = change24h >= 0 ? 'crypto-positive' : 'crypto-negative';
            const changeSymbol = change24h >= 0 ? '+' : '';
            
            changeElement.innerHTML = `<span class="${changeClass}">${changeSymbol}${changePercent}% (24h)</span>`;
        }
    } catch (error) {
        priceElement.textContent = 'CA$163,000';
        changeElement.innerHTML = '<span class="crypto-neutral">Data unavailable</span>';
    }
}

function updateEconomicCalendar() {
    const calendarContainer = document.getElementById('economic-events');
    if (!calendarContainer) return;
    
    const events = [
        { time: '08:30', title: 'CAD Inflation Rate (YoY)', impact: 'high' },
        { time: '12:30', title: 'CAD Unemployment Rate', impact: 'high' },
        { time: '14:00', title: 'BoC Interest Rate Decision', impact: 'high' },
        { time: '15:30', title: 'CAD Retail Sales (MoM)', impact: 'medium' },
        { time: '16:45', title: 'US Fed Powell Speech', impact: 'medium' }
    ];
    
    const eventsHTML = events.map(event => {
        const impactIcon = event.impact === 'high' ? 'üî¥' : 
                         event.impact === 'medium' ? 'üü°' : 'üü¢';
        return `
            <div class="event-item ${event.impact}-impact">
                <span class="event-time">${event.time}</span>
                <span class="event-title">${event.title}</span>
                <span class="event-impact">${impactIcon}</span>
            </div>
        `;
    }).join('');
    
    calendarContainer.innerHTML = eventsHTML;
}

function updateMarketSentiment() {
    const sentimentValue = document.getElementById('sentiment-value');
    const gaugeFill = document.getElementById('gauge-fill');
    const fearGreed = document.getElementById('fear-greed');
    const vixValue = document.getElementById('vix-value');
    
    if (!sentimentValue || !gaugeFill) return;
    
    const baseSentiment = 45;
    const randomVariation = (Math.random() - 0.5) * 20;
    const currentSentiment = Math.max(0, Math.min(100, baseSentiment + randomVariation));
    
    sentimentValue.textContent = Math.round(currentSentiment);
    
    const rotation = (currentSentiment / 100 * 180) - 90;
    gaugeFill.style.transform = `rotate(${rotation}deg)`;
    
    const sentimentLabel = document.querySelector('.sentiment-label');
    if (sentimentLabel) {
        if (currentSentiment > 70) {
            sentimentLabel.textContent = 'Bullish';
            sentimentLabel.className = 'sentiment-label bullish';
        } else if (currentSentiment > 30) {
            sentimentLabel.textContent = 'Neutral';
            sentimentLabel.className = 'sentiment-label neutral';
        } else {
            sentimentLabel.textContent = 'Bearish';
            sentimentLabel.className = 'sentiment-label bearish';
        }
    }
    
    const fearGreedValue = Math.round(currentSentiment * 0.8 + 10);
    if (fearGreed) {
        fearGreed.textContent = fearGreedValue;
        fearGreed.className = fearGreedValue > 50 ? 'indicator-value bullish' : 
                             fearGreedValue > 30 ? 'indicator-value neutral' : 
                             'indicator-value bearish';
    }
    
    const vixVal = (25 - (currentSentiment / 100 * 15)).toFixed(1);
    if (vixValue) {
        vixValue.textContent = vixVal;
        vixValue.className = vixVal > 20 ? 'indicator-value bearish' : 
                           vixVal > 15 ? 'indicator-value neutral' : 
                           'indicator-value bullish';
    }
}

function updateCentralBankRates() {
    const ratesContainer = document.getElementById('interest-rates');
    if (!ratesContainer) return;
    
    const rates = [
        { flag: 'üá®üá¶', name: 'BoC Rate', rate: '2.50%', change: 'down', direction: '‚ñº' },
        { flag: 'üá∫üá∏', name: 'Fed Fund Rate', rate: '5.25-5.50%', change: 'unchanged', direction: 'Ôºç' },
        { flag: 'üá™üá∫', name: 'ECB Rate', rate: '4.25%', change: 'unchanged', direction: 'Ôºç' }
    ];
    
    const ratesHTML = rates.map(rate => `
        <div class="rate-item">
            <span class="country-flag">${rate.flag}</span>
            <span class="rate-info">
                <span class="rate-country">${rate.name}</span>
                <span class="rate-value">${rate.rate}</span>
            </span>
            <span class="rate-change ${rate.change}">${rate.direction}</span>
        </div>
    `).join('');
    
    ratesContainer.innerHTML = ratesHTML;
}

function updateEconomicIndicators() {
    const indicatorsContainer = document.getElementById('economic-indicators');
    if (!indicatorsContainer) return;
    
    const indicators = [
        { name: 'GDP Growth', value: '-1.6%', trend: 'negative' },
        { name: 'Inflation Rate', value: '1.9%', trend: 'neutral' },
        { name: 'Unemployment', value: '7.1%', trend: 'negative' },
        { name: 'BoC Rate', value: '2.50%', trend: 'negative' }
    ];
    
    const indicatorsHTML = indicators.map(indicator => `
        <div class="indicator-item">
            <span class="indicator-name">${indicator.name}</span>
            <span class="indicator-value ${indicator.trend}">${indicator.value}</span>
        </div>
    `).join('');
    
    indicatorsContainer.innerHTML = indicatorsHTML;
}

const econFacts = [
    "Canada's Bank of Canada cut rates to 2.50% in September 2025, the first cut in six months.",
    "Canadian unemployment reached 7.1% in August 2025, a four-year high.",
    "Canada's inflation rate is 1.9% as of August 2025, below the 2% target.",
    "The Canadian dollar is influenced by commodity prices, especially oil and gold.",
    "Canada's GDP contracted 1.6% in Q2 2025 due to declining exports.",
    "Economics is the study of how society manages its scarce resources.",
    "AI in economics enables better policy simulations and more accurate forecasting.",
    "Central banks use interest rates to regulate inflation and stimulate or cool the economy.",
    "Canada's S&P/TSX is among the world's top 10 largest stock exchanges.",
    "The Bank of Canada's mandate is to keep inflation low, stable and predictable."
];

function displayRandomFact() {
    const factBox = document.getElementById('fact-box');
    if (factBox) {
        const index = Math.floor(Math.random() * econFacts.length);
        factBox.textContent = econFacts[index];
    }
}
</script>
</body>
</html>