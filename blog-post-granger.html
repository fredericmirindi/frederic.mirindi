<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Granger Causality Analysis | Frédéric Mirindi</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .visualization-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 2px 12px rgba(30,60,90,0.06);
        }
        .code-block {
            background: #2d3e50;
            color: #fff;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            overflow-x: auto;
        }
        .equation-box {
            background: #eaf6fb;
            border-left: 4px solid #1abc9c;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .graph-title {
            color: #2d3e50;
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .styled-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .styled-table th, .styled-table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        .styled-table th {
            background-color: #1abc9c;
            color: white;
        }
        .graph-description {
            font-size: 1.02rem;
            color: #444;
            margin: 0.7rem 0 1.1rem 0;
        }
        .d3-legend {
            font-size: 0.98rem;
            margin-top: 0.3rem;
            color: #555;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container header-content">
            <h1><a href="index.html">Frédéric Mirindi</a></h1>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="research.html" class="active">Research</a></li>
                    <li><a href="teaching.html">Teaching</a></li>
                    <li><a href="cv.html">CV</a></li>
                    <li><a href="blog.html">Blog</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container content-section">
            <!-- Implementation Workflow -->
            <div class="visualization-section">
                <h2 class="graph-title">Granger Causality Implementation Workflow</h2>
                <div id="flowchart">
                    <img src="images/granger-flowchart.svg" alt="Implementation flowchart: Steps for Granger causality analysis. Step 1: Collect time series data. Step 2: Test for stationarity. Step 3: Select lag order. Step 4: Estimate VAR model. Step 5: Perform Granger causality test. Step 6: Interpret results." style="max-width:100%;height:auto;">
                </div>
                <div class="graph-description">
                    <strong>Description:</strong> The flowchart above illustrates the standard workflow for Granger causality analysis. It starts with collecting time series data, checking for stationarity, selecting the optimal lag order (using AIC/BIC), estimating a vector autoregression (VAR) model, running the Granger causality test, and finally interpreting the results. This stepwise process ensures the validity and interpretability of Granger causality findings.
                </div>
            </div>

            <!-- Mathematical Formulation -->
            <div class="equation-box">
                <h3>Vector Autoregression (VAR) Model</h3>
                $$
                \begin{cases}
                Y_t = \alpha_0 + \sum_{i=1}^p \alpha_i Y_{t-i} + \sum_{i=1}^p \beta_i X_{t-i} + \epsilon_t \\
                X_t = \gamma_0 + \sum_{i=1}^p \gamma_i X_{t-i} + \sum_{i=1}^p \delta_i Y_{t-i} + \eta_t
                \end{cases}
                $$
                <p>Optimal lag length <em>p</em> is determined by information criteria such as AIC or BIC. Granger causality is tested by checking if the coefficients $\beta_i$ (or $\delta_i$) are jointly significant.</p>
            </div>

            <!-- Interactive Demonstration -->
            <div class="visualization-section">
                <h2 class="graph-title">Interactive Causality Test</h2>
                <div class="graph-description">
                    <strong>Description:</strong> The line chart below simulates two economic time series: Consumer Confidence and Retail Sales. Notice how movements in Consumer Confidence often precede similar movements in Retail Sales. In Granger causality analysis, if including lagged values of Consumer Confidence improves the prediction of Retail Sales, we say that confidence Granger-causes sales. This visualization helps you see the predictive relationship in real time.
                </div>
                <canvas id="causalityChart" aria-label="Simulated time series for Granger causality demonstration" role="img"></canvas>
                <div class="code-block">
                    <pre><code class="language-javascript">
// Chart.js Configuration
const config = {
    type: 'line',
    data: {
        labels: timeLabels,
        datasets: [{
            label: 'Consumer Confidence',
            data: confidenceData,
            borderColor: '#1abc9c'
        },{
            label: 'Retail Sales',
            data: salesData,
            borderColor: '#34495e'
        }]
    },
    options: {
        responsive: true,
        interaction: { mode: 'index' }
    }
};
                    </code></pre>
                </div>
            </div>

            <!-- Causal Network -->
            <div class="visualization-section">
                <h2 class="graph-title">Multivariate Causal Relationships</h2>
                <div class="graph-description">
                    <strong>Description:</strong> The network diagram below visualizes Granger-causal links among four macroeconomic variables: GDP, Interest Rates, Inflation, and Unemployment. Arrows indicate the direction of predictive influence. For example, GDP and Inflation both Granger-cause Interest Rates, and GDP also Granger-causes Unemployment. Node color distinguishes causes (green) from effects (dark blue). This type of graph helps reveal the structure of complex economic systems and can be extended to larger datasets.
                </div>
                <div id="networkDiagram"></div>
                <div class="d3-legend">
                    <span style="display:inline-block;width:14px;height:14px;background:#1abc9c;border-radius:7px;margin-right:5px;"></span> Cause
                    <span style="display:inline-block;width:14px;height:14px;background:#34495e;border-radius:7px;margin-left:20px;margin-right:5px;"></span> Effect
                </div>
                <div class="code-block">
                    <pre><code class="language-javascript">
// D3.js Network Configuration
const simulation = d3.forceSimulation(nodes)
    .force("link", d3.forceLink(links).id(d => d.id))
    .force("charge", d3.forceManyBody().strength(-50))
    .force("center", d3.forceCenter(width/2, height/2));
                    </code></pre>
                </div>
            </div>

            <!-- Interpretation Guide -->
            <div class="visualization-section">
                <h2 class="graph-title">Test Result Interpretation</h2>
                <div class="graph-description">
                    <strong>Description:</strong> This table summarizes how to interpret the statistical results of a Granger causality test. A high F-statistic and low p-value indicate strong evidence that one variable Granger-causes another. Marginal evidence occurs with moderate values, while low F and high p indicate no significant predictive relationship.
                </div>
                <table class="styled-table" aria-label="Granger causality result interpretation guide">
                    <thead>
                        <tr>
                            <th>F-Statistic</th>
                            <th>p-value</th>
                            <th>Interpretation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>&gt; 3.0</td>
                            <td>&lt; 0.05</td>
                            <td>Strong evidence of Granger causality</td>
                        </tr>
                        <tr>
                            <td>1.5-3.0</td>
                            <td>0.05-0.1</td>
                            <td>Marginal evidence</td>
                        </tr>
                        <tr>
                            <td>&lt; 1.5</td>
                            <td>&gt; 0.1</td>
                            <td>No significant causality</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container footer-content">
            <nav class="footer-links" aria-label="Footer navigation">
                <ul class="footer-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="research.html" class="active">Research</a></li>
                    <li><a href="teaching.html">Teaching</a></li>
                    <li><a href="cv.html">CV</a></li>
                    <li><a href="blog.html">Blog</a></li>
                </ul>
            </nav>
            <div class="footer-contact">
                <p><i class="fas fa-envelope"></i> mirindif@myumanitoba.ca</p>
                <p><i class="fas fa-phone"></i> +1 (204) 298-4337</p>
                <p><i class="fas fa-map-marker-alt"></i> Winnipeg, MB, Canada</p>
                <p><i class="fas fa-globe"></i> fredericmirindi.com</p>
            </div>
            <div class="footer-social-icons">
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fas fa-graduation-cap"></i></a>
                <a href="#"><i class="fab fa-orcid"></i></a>
                <a href="#"><i class="fab fa-researchgate"></i></a>
            </div>
        </div>
        <div class="container">
            <div class="footer-copyright">
                <p>© <span id="current-year"></span> Frédéric Mirindi. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Chart.js Implementation
        const timeLabels = Array.from({length: 24}, (_,i) => `2025-Q${Math.floor(i/6)+1}`);
        const confidenceData = Array.from({length: 24}, () => Math.random()*100);
        const salesData = confidenceData.map(x => x*0.8 + Math.random()*20);
        
        const ctx = document.getElementById('causalityChart');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: timeLabels,
                datasets: [{
                    label: 'Consumer Confidence',
                    data: confidenceData,
                    borderColor: '#1abc9c',
                    tension: 0.4
                }, {
                    label: 'Retail Sales',
                    data: salesData,
                    borderColor: '#34495e',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    tooltip: { mode: 'index' }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: { beginAtZero: true }
                }
            }
        });

        // D3.js Network Diagram
        const width = 800, height = 400;
        const svg = d3.select("#networkDiagram")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        const nodes = [
            {id: "GDP", type: "cause"}, 
            {id: "Interest Rates", type: "effect"},
            {id: "Inflation", type: "cause"},
            {id: "Unemployment", type: "effect"}
        ];

        const links = [
            {source: "GDP", target: "Interest Rates"},
            {source: "Inflation", target: "Interest Rates"},
            {source: "GDP", target: "Unemployment"}
        ];

        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-50))
            .force("center", d3.forceCenter(width/2, height/2));

        const link = svg.append("g")
            .attr("stroke", "#1abc9c")
            .selectAll("line")
            .data(links)
            .enter().append("line");

        const node = svg.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("r", 10)
            .attr("fill", d => d.type === "cause" ? "#1abc9c" : "#34495e")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        // Add labels to nodes
        const label = svg.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .attr("dy", 4)
            .attr("dx", 14)
            .attr("font-size", "1rem")
            .attr("fill", "#222")
            .text(d => d.id);

        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            node.attr("cx", d => d.x)
                .attr("cy", d => d.y);
            label.attr("x", d => d.x)
                .attr("y", d => d.y);
        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Update current year
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>
